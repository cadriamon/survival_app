WindowManager:
    Title:
    Load_Game:
    Manual: 
    Setting:
    Start_Game:
    Story:
    Search:
    Gameplay:


<Title>:
    name: "title"

    GridLayout:
        cols: 3
        rows: 2
        GridLayout:
            cols: 1
            Label:
                text: ""
            Label:
                text: ""
            Label: 
                text: "Survival Game"
            Button:
                id: start
                text: "Start"
                on_release: 
                    app.root.current = "start_game"
                    root.manager.transition.direction = "left"
                    root.play_menu_sound()
            Button:
                id: load_game
                text: "Load Game"
                on_release: 
                    app.root.current = "load_game"
                    root.manager.transition.direction = "left"
                    root.play_menu_sound()
            Button: 
                id: manual
                text: "Manual"
                on_release:
                    app.root.current = "manual"
                    root.manager.transition.direction = "left"
                    root.play_menu_sound()
            Button:
                id: setting
                text: "Settings"
                on_release:
                    app.root.current = "setting"
                    root.manager.transition.direction = "left"
                    root.play_menu_sound()


<Start_Game>
    name: "start_game"
    player_name: player_name
    GridLayout:
        cols: 1
        Label:
            text: "Name"
        TextInput:
            id: player_name
            multiline: False
        Button:
            text: "Easy"
            on_release:
                root.easy_difficulty()
                app.root.current = "story"
                root.manager.transition.direction = "left"
                root.play_menu_sound()
        Button:
            text: "Medium"
        Button:
            text: "Hard"
        Button:
            text: "Back"
            on_release: 
                app.root.current = "title"
                root.manager.transition.direction = "right"
                root.play_menu_sound()

<Load_Game>
    name: "load_game"
    GridLayout: 
        cols: 1
        Button:
            text: "Game 1"
        Button: 
            text: "Game 2"
        Button:
            text: "Game 3"
        Button:
            text: "Back"
            on_release:
                app.root.current = "title"
                root.manager.transition.direction = "right"
                root.play_menu_sound()


<Manual>
    name: "manual"
    GridLayout: 
        cols: 1 
        Label: 
            text: "Game manual text"
        Button: 
            text: "Back" 
            on_release: 
                app.root.current = "title"
                root.manager.transition.direction = "right"
                root.play_menu_sound()

<Setting>
    name: "setting"
    GridLayout:
        cols: 1
        Button: 
            text: "Volume"
        Button:
            text: "Text Speed"
        Button:
            text: "Back"
            on_release:
                app.root.current = "title"
                root.manager.transition.direction = "right"
                root.play_menu_sound()

<Story>
    name: "story"
    on_enter:    
        root.update_screen()
    on_touch_down:
        app.root.current = "gameplay"
        root.manager.transition.direction = "up"

<Search>
    name: "search"
    on_enter:    
        root.update_screen()
    on_touch_down:
        app.root.current = "gameplay"
        root.manager.transition.direction = "up"



<Gameplay>:
    name: "gameplay"
    on_enter:
        root.update_screen()
    GridLayout:
        cols:1
        Label: 
            text: ""
        GridLayout:
            cols:3
            Button: 
                on_release: 
                    root.area_1()
                    app.root.current = "story"
                    root.manager.transition.direction = "up"

            Button:
                text: "Back to Area"
                on_release: 
                    app.root.current = "story"
                    root.manager.transition.direction = "down"
                    root.play_menu_sound()
            Button: 
                on_release:
                    root.area_2()
                    app.root.current = "story"
                    root.manager.transition.direction = "up"

            
            Button:
                text: "Title Menu"
                on_release: 
                    root.stop_BGM()
                    app.root.current = "title"
                    root.manager.transition.direction = "right"
                    root.play_menu_sound()
            Button:
                text: "Search Area"
                on_release: 
                    root.area_search()
                    app.root.current = "search"
                    root.manager.transition.direction = "up"
                    root.play_menu_sound()

            Button:
                text: "Save Game"